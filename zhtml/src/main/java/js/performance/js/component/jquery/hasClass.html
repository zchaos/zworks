<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta http-equiv="Pragma" content="no-cache"/>
		<meta http-equiv="Cache-Control" content="no-cache"/>
		<meta http-equiv="Expires" content="0"/>
		<meta name="sz-context-path" content="/succezbi"/>
		<title>测试jquery的hasClass方法</title>
		<script src="../../../source/jquery/jquery-1.7.2.js"></script>
	</head>
	<body>
		循环次数:
		<input id="loop" value="10000" />
		<button onclick="test()">
			开始测试
		</button>
		<hr>
		<table>
			<tr>
				<td>jquery方法:</td>
				<td id="jtime"></td>
			</tr>
			<tr>
				<td>自定义实现方法:</td>
				<td id="ctime"></td>
			</tr>
		</table>

		<style>
			.demo-container {
				background: pink;
				padding: 4px 8px;
			}
			.demo-box {
				border: 1px solid #CCC;
				padding: 8px 12px;
			}
			.status-box {
				border: 1px solid #999;
				padding: 8px 12px;
				margin: 4px 0 2px;
			}
		</style>
		<div id="demo-container" class="demo-container">
			<div class="demo-box">
				Demonstration Box
			</div>
			<ul>
				<li>
					list item 1
				</li>
				<li>
					list <strong>item</strong> 2
				</li>
			</ul>
		</div>
		<script>
			var hloop = document.getElementById("loop");
			var hjtime = document.getElementById("jtime");
			var hctime = document.getElementById("ctime");

			var CLASS_CONTAINER = "demo-container";
			var hcontainer = document.getElementById("demo-container");
			var $hcontainer = $(hcontainer);

			function test() {
				var loop = hloop.value;

				var d1 = new Date();
				for (var i = 0; i < loop; i++) {
					$hcontainer.hasClass(CLASS_CONTAINER);
				}
				var d2 = new Date();
				for (var i = 0; i < loop; i++) {
					hasClass(hcontainer, CLASS_CONTAINER);
				}
				var d3 = new Date();

				hjtime.innerHTML = d2 - d1;
				hctime.innerHTML = d3 - d2;
			}

			function hasClass(hdom, className) {
				var cls = hdom.className;
				var len1 = cls.length;
				var len2 = className.length;
				if (len1 < len2) {
					return false;
				} else if (len1 === len2) {
					return cls === className;
				}
				return (" " + cls + " ").indexOf(" " + className + " ") > 0;
			}

			function hasClass1(hdom, className) {
				var cls = hdom.className;
				return (" " + cls + " ").indexOf(" " + className + " ") > 0;
			}
		</script>
	</body>
</html>